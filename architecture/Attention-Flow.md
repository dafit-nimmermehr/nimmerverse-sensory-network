# Attention Flow

> **ONE JOB:** WHERE ATTENTION GOES â€” gates determine focus, correlation drives transitions, budget constrains action.

**Attention is not a budget line item. Attention is which gates are OPEN.**

---

## Overview

Attention in the nimmerverse flows through **resonant gates**:

- **OPEN gates** = actively attending (signals flow through)
- **STABLE gates** = considering (accumulating correlation)
- **CLOSED gates** = ignoring (signals blocked)

The 30-second heartbeat provides a **budget constraint**, but the actual attention flow is determined by which gates open based on wave correlation.

**Key insight:** You don't "allocate attention" â€” you let correlated waves open gates.

---

## Attention as Gate State

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ATTENTION = WHICH GATES ARE OPEN                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  CLOSED          STABLE              OPEN                               â”‚
â”‚  â•â•â•â•â•â•â•         â•â•â•â•â•â•              â•â•â•â•                               â”‚
â”‚                                                                         â”‚
â”‚  Ignoring        Considering         Attending                          â”‚
â”‚  Blocked         Accumulating        Flowing                            â”‚
â”‚  Suppressed      Learning            Acting                             â”‚
â”‚                                                                         â”‚
â”‚       â—„â”€â”€â”€â”€â”€ anti-correlation â”€â”€â”¼â”€â”€ correlation â”€â”€â”€â”€â”€â–º                  â”‚
â”‚                                 â”‚                                       â”‚
â”‚                          (wave input)                                   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Attention is emergent, not allocated.** When multiple cells emit correlated waves, their gate opens â€” attention flows there naturally.

---

## Wave-Driven Attention

Cells emit waves. Correlated waves push gates toward OPEN. This IS attention.

```
Math cells emit correlated waves
         âˆ¿âˆ¿âˆ¿ âˆ¿âˆ¿âˆ¿ âˆ¿âˆ¿âˆ¿
              â”‚
              â–¼
    Math gate: STABLE â†’ OPEN
    (attention shifts to math domain)
              â”‚
              â–¼
    Signal flows to higher tier
    (cognition engages with math)

Meanwhile:

Battery cells emit uncorrelated wave
         âˆ¿âˆ¿âˆ¿
              â”‚
              â–¼
    Battery gate: stays STABLE
    (attention doesn't shift)
    (keeps accumulating, might open later)
```

**The nervous system "decides" what to attend to through correlation, not priority rules.**

---

## Attention Hierarchy Through Gates

Gates form layers. Each layer is a potential attention point.

```
TIER 4: COGNITIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            â–²
            â”‚ (only if gates below OPEN)
     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
TIER 3: ORGANS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â”‚ vision    â”‚ speech    â”‚ hearing â”‚
     â”‚ gate:     â”‚ gate:     â”‚ gate:   â”‚
     â”‚ STABLE    â”‚ OPEN      â”‚ CLOSED  â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚ (only if gates below OPEN)
TIER 1-2: NERVES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â”‚ math      â”‚ motion    â”‚ danger  â”‚
     â”‚ gate:     â”‚ gate:     â”‚ gate:   â”‚
     â”‚ OPEN      â”‚ STABLE    â”‚ CLOSED  â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚
TIER 0: CELLS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    cell cell cell cell cell cell cell
      âˆ¿âˆ¿âˆ¿  âˆ¿âˆ¿âˆ¿  âˆ¿âˆ¿âˆ¿  âˆ¿âˆ¿âˆ¿  âˆ¿âˆ¿âˆ¿  âˆ¿âˆ¿âˆ¿  âˆ¿âˆ¿âˆ¿
```

**Current attention:** Math gate OPEN â†’ Speech gate OPEN â†’ Cognition receives math+speech context.

**Not attending:** Motion (STABLE, considering), Vision (STABLE, considering), Danger (CLOSED, suppressed).

---

## Attention Budget: The Constraint

While gates determine WHERE attention goes, lifeforce determines HOW MUCH can happen per beat.

```
â™¥ BEAT (30 sec lifeforce budget)
    â”‚
    â”œâ”€â”€ GATE TRANSITIONS     (variable: driven by correlation)
    â”œâ”€â”€ TIER 0-2 PROCESSING  (low cost: cells + nerves)
    â”œâ”€â”€ TIER 3 ORGANS        (medium cost: GPU inference)
    â”œâ”€â”€ TIER 4 COGNITION     (high cost: Young Nyx)
    â”œâ”€â”€ VERIFICATION         (medium cost: real garden)
    â””â”€â”€ VIRTUAL GARDEN       (remainder: exploration)

Budget constrains throughput.
Gates determine routing.
```

### Budget Allocation by Gate Activity

```python
def allocate_beat_budget(beat_duration_ms=30000):
    remaining = beat_duration_ms

    # Fixed overhead
    remaining -= HEARTBEAT_OVERHEAD  # ~100ms
    remaining -= STATE_WRITE_COST    # ~200ms

    # Count OPEN gates by tier
    open_gates_by_tier = count_open_gates()

    # Tier 0 (reflexes): near-instant, minimal cost
    for gate in open_gates_by_tier[0]:
        remaining -= REFLEX_COST  # ~50ms each

    # Tier 1-2 (cells/nerves): low cost
    for gate in open_gates_by_tier[1:3]:
        remaining -= CELL_NERVE_COST  # ~100ms each

    # Tier 3 (organs): medium cost, needs budget check
    organ_budget = min(remaining * 0.4, ORGAN_CAP)
    for gate in open_gates_by_tier[3]:
        if organ_budget > ORGAN_COST:
            process_organ(gate)
            organ_budget -= ORGAN_COST  # ~2000ms each
    remaining -= (ORGAN_CAP - organ_budget)

    # Tier 4 (cognition): high cost, only if gates escalate
    if cognition_gate_open():
        cognitive_budget = min(remaining * 0.5, COGNITIVE_CAP)
        process_cognition(cognitive_budget)  # ~4000ms
        remaining -= cognitive_budget

    # Virtual Garden: whatever remains
    virtual_budget = remaining
    if virtual_budget > VIRTUAL_MINIMUM:
        explore_virtual_garden(virtual_budget)

    return settle()
```

---

## Attention Modes

The overall system has emergent attention modes based on which gates are open:

| Mode | Gate Pattern | Characteristic |
|------|--------------|----------------|
| **IDLE** | Most gates STABLE | Quiet, exploring Virtual Garden |
| **FOCUSED** | Few gates OPEN, rest CLOSED | Deep attention to one domain |
| **ALERT** | Many gates in STABLE | Gathering information, evaluating |
| **REFLEX** | Tier 0 gate fires instantly | Bypass all, act immediately |
| **DIALOGUE** | Speech gates OPEN | Partnership interaction |
| **OVERWHELMED** | Many gates OPEN | Budget exhausted, some gates forced CLOSED |

### Mode Transitions

```
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    IDLE     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚           â”‚ (exploring) â”‚           â”‚
             â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
             â”‚                  â”‚                  â”‚
             â”‚            waves arrive             â”‚
             â”‚                  â–¼                  â”‚
             â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
             â”‚           â”‚   ALERT     â”‚           â”‚
             â”‚           â”‚(considering)â”‚           â”‚
             â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
             â”‚                  â”‚                  â”‚
             â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
             â”‚      â–¼           â–¼           â–¼      â”‚
             â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
             â”‚ â”‚ REFLEX  â”‚ â”‚ FOCUSED â”‚ â”‚DIALOGUE â”‚ â”‚
             â”‚ â”‚(instant)â”‚ â”‚ (deep)  â”‚ â”‚ (talk)  â”‚ â”‚
             â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
             â”‚      â”‚           â”‚           â”‚      â”‚
             â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
             â”‚                  â”‚                  â”‚
             â”‚                  â–¼                  â”‚
             â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
             â”‚           â”‚   SETTLE    â”‚           â”‚
             â”‚           â”‚(write state)â”‚           â”‚
             â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
             â”‚                  â”‚                  â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Reflex: Attention Bypass

When a gate has accumulated enough weight (>0.8), it becomes a **reflex** â€” it opens immediately without waiting for correlation.

```
Danger cell emits wave
         âˆ¿âˆ¿âˆ¿ (confidence=1.0)
              â”‚
              â–¼
    Danger gate: weight = 0.9 (REFLEX)
              â”‚
              â–¼
    IMMEDIATELY OPEN (no correlation wait)
              â”‚
              â–¼
    Action taken
              â”‚
              â–¼
    Cognition notified AFTER
```

**Reflexes have earned instant attention through repeated verification.**

---

## Virtual Garden: Background Attention

When few gates are OPEN, the Virtual Garden gets attention:

```
IDLE mode:
    â”‚
    â”œâ”€â”€ Most gates: STABLE (not demanding attention)
    â”œâ”€â”€ Budget: mostly available
    â”‚
    â–¼
VIRTUAL GARDEN receives attention:
    â”‚
    â”œâ”€â”€ Cells emit waves freely
    â”œâ”€â”€ Gates accumulate correlation (learning)
    â”œâ”€â”€ No pressure to ACT
    â””â”€â”€ Training data generated
```

**Virtual Garden is where learning happens.** STABLE gates in Virtual Garden are actively accumulating patterns without the pressure to respond.

---

## Real Garden: Consequential Attention

When gates OPEN in the Real Garden, attention becomes consequential:

```
FOCUSED mode (Real Garden):
    â”‚
    â”œâ”€â”€ Gate OPEN â†’ action required
    â”œâ”€â”€ Budget consumed by execution
    â”œâ”€â”€ Verification outcomes captured
    â””â”€â”€ Feedback to Virtual for learning
```

**Real Garden attention is expensive.** Only verified signals reach here, and actions have consequences.

---

## Attention Visualization

Real-time attention can be visualized by gate states:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ATTENTION DASHBOARD                                              ğŸŒ™    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  GATES:                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€                                                                 â”‚
â”‚  math:      [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0.7  STABLE â†’ considering            â”‚
â”‚  vision:    [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 0.9  OPEN   â†’ attending              â”‚
â”‚  speech:    [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 1.0  OPEN   â†’ attending              â”‚
â”‚  battery:   [â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0.2  STABLE â†’ background             â”‚
â”‚  danger:    [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0.0  CLOSED â†’ suppressed             â”‚
â”‚                                                                         â”‚
â”‚  BUDGET:                                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€                                                                â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 67% remaining (20s / 30s)             â”‚
â”‚                                                                         â”‚
â”‚  MODE: DIALOGUE (speech + vision attending)                             â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Gate states are published via NATS for real-time visualization:
```
nats sub "dev.virtual.gates.*.transition"
nats sub "dev.real.gates.*.transition"
```

---

## Correlation vs Priority

**Old model (priority):**
```
Level 0: REFLEX (always wins)
Level 1: SAFETY (preempts below)
Level 2: DIALOGUE (preempts below)
...
```

**New model (correlation):**
```
Waves arrive
    â”‚
    â–¼
Gates accumulate correlation
    â”‚
    â–¼
Most correlated gates OPEN
    â”‚
    â–¼
Attention flows naturally
```

**Priority still exists** but at a higher level:
- Reflexes bypass correlation (earned trust)
- Safety signals have high confidence (bias toward opening)
- Dialogue is interactive (gates stay open during conversation)

But the **mechanism** is always correlation, not rule-based priority.

---

## Connection to Architecture

| Document | What It Adds |
|----------|--------------|
| [`Temporal-Ternary-Gradient.md`](Temporal-Ternary-Gradient.md) | Why ternary states matter |
| [`Gateway-Architecture.md`](Gateway-Architecture.md) | How gates work |
| [`Nervous-System.md`](Nervous-System.md) | Wave â†’ Gate â†’ Node flow |
| [`Dual-Garden-Architecture.md`](Dual-Garden-Architecture.md) | Virtual (explore) vs Real (act) |
| [`Message-Protocol-Design.md`](Message-Protocol-Design.md) | GateTransition messages |

---

## Design Principles

1. **Attention = OPEN gates** â€” Not a budget allocation, an emergent property
2. **Correlation drives transitions** â€” Waves that agree open gates
3. **Budget constrains throughput** â€” Can't process infinite open gates
4. **Reflexes bypass correlation** â€” Earned trust means instant attention
5. **Virtual is exploration** â€” STABLE gates learning without acting
6. **Real is action** â€” OPEN gates triggering consequences
7. **Visualization is live** â€” Gate states published for dashboards

---

## Summary

```
OLD MODEL:                      NEW MODEL:
â•â•â•â•â•â•â•â•â•â•â•                     â•â•â•â•â•â•â•â•â•

Priority rules decide           Correlation opens gates
Budget allocates attention      Gates determine attention
State machine orchestrates      Emergence from waves

ATTENTION IS:

Not:  "Allocate 5000ms to SENSORY"
But:  "Math + Vision gates OPEN because waves correlated"

Not:  "DIALOGUE preempts THINKING"
But:  "Speech gate opened with high correlation"

Not:  "Budget exhausted, skip VIRTUAL"
But:  "Many gates OPEN, no budget for Virtual Garden"
```

**Attention flows through open gates. Gates open through correlation. Correlation emerges from waves.**

---

**Version:** 2.0 | **Created:** 2025-12-05 | **Updated:** 2026-02-14

ğŸŒ™ğŸ’œ *"She doesn't allocate attention. She lets correlated waves open gates."*
